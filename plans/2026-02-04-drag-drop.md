# Drag & Drop Support for uni-dom

## Overview

Add a `DragDrop` object that provides higher-level drag and drop abstractions on top of the existing HTML5 drag events.

## Goals

1. Simplify common drag-and-drop patterns
2. Provide reactive state tracking for drag operations
3. Support data transfer between drag sources and drop targets
4. Handle file drops from the OS

## API Design

### Core Types

```scala
// Data being transferred during drag
case class DragData(
  kind: String,           // Type identifier (e.g., "item", "file", "text")
  data: Any,              // The actual data
  effectAllowed: String = "all"  // copy, move, link, all, etc.
)

// Current state of drag operation
case class DragState(
  isDragging: Boolean,
  data: Option[DragData],
  overElement: Option[dom.Element]
)
```

### DragDrop Object

```scala
object DragDrop:
  // Make an element draggable
  def draggable(data: DragData): DomNode
  def draggable(kind: String, data: Any): DomNode

  // Create a drop zone
  def dropZone(onDrop: DragData => Unit): DomNode
  def dropZone(accept: String*)(onDrop: DragData => Unit): DomNode

  // File drop zone (for files from OS)
  def fileDropZone(onFiles: Seq[dom.File] => Unit): DomNode

  // Reactive state
  def state: Rx[DragState]
  def isDragging: Rx[Boolean]

  // Event handlers for custom behavior
  def onDragStart(handler: DragData => Unit): DomNode
  def onDragEnd(handler: () => Unit): DomNode
  def onDragOver(handler: dom.DragEvent => Unit): DomNode
  def onDragEnter(handler: dom.DragEvent => Unit): DomNode
  def onDragLeave(handler: dom.DragEvent => Unit): DomNode
```

### Usage Examples

```scala
import wvlet.uni.dom.all.*

// Simple draggable item
div(
  DragDrop.draggable("item", itemId),
  "Drag me"
)

// Drop zone that accepts items
div(
  DragDrop.dropZone("item") { data =>
    println(s"Dropped: ${data.data}")
  },
  cls -> "drop-area",
  "Drop here"
)

// File drop zone
div(
  DragDrop.fileDropZone { files =>
    files.foreach(f => println(s"File: ${f.name}"))
  },
  "Drop files here"
)

// Visual feedback during drag
div(
  DragDrop.isDragging.map { dragging =>
    if dragging then cls -> "drop-highlight" else cls -> ""
  }
)
```

## Implementation Notes

- Use `dataTransfer.setData/getData` with JSON for structured data
- Prefix data types with "application/x-uni-" for namespacing
- Track drag state globally for reactive updates
- Handle `dragover` with `preventDefault()` to allow drops
- Support both internal data and external files

## Test Plan

- Test draggable modifier returns DomNode
- Test dropZone modifier returns DomNode
- Test fileDropZone modifier returns DomNode
- Test DragState case class
- Test DragData case class
- Test reactive state emissions
- Test rendering with drag handlers
